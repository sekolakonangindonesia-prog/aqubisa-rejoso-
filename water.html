<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Conservation Funds - AqruBiSA</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- CSS VARIABLE & RESET --- */
        :root {
            --primary-dark: #0b1f30; 
            --water-blue: #0077b6;
            --water-light: #caf0f8;
            --accent-gold: #d4af37;
            --text-dark: #333;
            --bg-light: #f4f7f6;
            --success-green: #28a745;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background-color: var(--bg-light); color: var(--text-dark); line-height: 1.6; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* --- HEADER --- */
        header { background: white; padding: 5px 5%; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.08); display: flex; justify-content: space-between; align-items: center; }
        .brand-wrapper { display: flex; flex-direction: column; align-items: flex-start; justify-content: center; }
        nav ul { list-style: none; display: flex; gap: 20px; }
        nav a { font-weight: 600; color: #444; font-size: 0.9rem; }
        nav a:hover { color: var(--water-blue); }
        .btn-header { background: var(--water-blue); color: white; padding: 8px 25px; border-radius: 25px; font-weight: bold; font-size: 0.9rem; }

        /* --- HERO SECTION --- */
        .water-hero {
            position: relative;
            height: 400px;
            background: linear-gradient(to right, rgba(0, 119, 182, 0.9), rgba(11, 31, 48, 0.6)), url('https://source.unsplash.com/1600x900/?rain,river');
            background-size: cover;
            background-position: center;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 5%;
        }
        .hero-content-box { max-width: 800px; border-left: 5px solid var(--accent-gold); padding-left: 30px; }
        .water-hero h1 { font-size: 2.8rem; line-height: 1.1; margin-bottom: 10px; font-weight: 800; }
        .water-hero p { font-size: 1.1rem; opacity: 0.9; margin-bottom: 20px; }
        .btn-back { border: 1px solid white; padding: 10px 20px; color: white; border-radius: 50px; font-size: 0.9rem; display: inline-block; }
        .btn-back:hover { background: white; color: var(--water-blue); }

        /* --- GLOBAL COUNTER (ANGKA TOTAL) --- */
        .global-counter-box {
            background: var(--primary-dark);
            color: white;
            padding: 40px 5%;
            text-align: center;
            position: relative;
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-bottom: 5px solid var(--water-blue);
        }
        .counter-val { font-size: 3.5rem; font-weight: 800; color: var(--water-light); line-height: 1; margin: 10px 0; }
        .counter-label { text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem; opacity: 0.8; }

        /* --- POLICY GRID --- */
        .policy-section { padding: 40px 5%; max-width: 1200px; margin: 0 auto; }
        .policy-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: -30px; }
        .policy-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 15px; border: 1px solid #eee; }
        .policy-icon { font-size: 2rem; color: var(--water-blue); }
        
        /* --- INFRASTRUCTURE DASHBOARD --- */
        .infra-section { padding: 60px 5%; max-width: 1200px; margin: 0 auto; }
        .section-title { text-align: center; margin-bottom: 40px; color: var(--primary-dark); font-size: 2rem; font-weight: 700; }
        
        .infra-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px; }
        
        .infra-card { 
            background: white; border: 1px solid #ddd; border-radius: 12px; padding: 30px; position: relative; 
            border-top: 4px solid var(--water-blue); 
        }
        .tag-infra { 
            position: absolute; top: 20px; right: 20px; background: var(--water-blue); 
            color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; 
        }
        
        /* UKURAN FONT BESAR UNTUK TARGET */
        .big-number { 
            font-size: 4.5rem; 
            font-weight: 800; 
            color: var(--primary-dark); 
            line-height: 1; 
            margin: 20px 0; 
        }
        
        .progress-container { margin: 20px 0; }
        .progress-bg { width: 100%; height: 8px; background: #eee; border-radius: 4px; }
        .progress-fill { height: 100%; background: var(--water-blue); border-radius: 4px; }
        
        .spec-list { margin-top: 20px; background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 0.85rem; color: #555; }
        .spec-list div { margin-bottom: 5px; display: flex; align-items: center; gap: 8px; }

        /* --- CALCULATOR SECTION --- */
        .calc-section { background: white; padding: 60px 5%; border-top: 1px solid #eee; }
        
        .calc-wrapper {
            max-width: 900px; margin: 0 auto; background: white; 
            border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e0e0e0;
        }

        /* Tabs */
        .calc-tabs { display: flex; background: #f1f3f5; border-bottom: 1px solid #ddd; }
        .calc-tab {
            flex: 1; padding: 18px; text-align: center; cursor: pointer; font-weight: 700; color: #666; transition: 0.3s;
            border-bottom: 3px solid transparent;
        }
        .calc-tab.active { background: white; color: var(--primary-dark); border-bottom: 3px solid var(--accent-gold); }
        .calc-tab:hover { background: #e9ecef; }

        /* Calc Body */
        .calc-body { padding: 40px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .form-label { display: block; font-weight: 600; margin-bottom: 8px; color: #444; font-size: 0.9rem; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 0.95rem; margin-bottom: 15px; }
        .form-row { display: flex; gap: 15px; }
        
        .btn-calc {
            width: 100%; padding: 12px; background: var(--accent-gold); color: #000; font-weight: 800; 
            border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; transition: 0.3s; margin-top: 10px;
        }
        .btn-calc:hover { background: #c5a028; transform: translateY(-2px); }

        /* Result Box */
        .result-panel {
            background: var(--primary-dark); color: white; border-radius: 10px; padding: 30px; text-align: center;
            display: flex; flex-direction: column; justify-content: center;
        }
        .res-title { font-size: 0.9rem; opacity: 0.8; margin-bottom: 10px; }
        .res-number { font-size: 2.5rem; font-weight: 800; color: var(--accent-gold); line-height: 1.2; }
        .res-unit { font-size: 1rem; font-weight: 600; margin-bottom: 20px; display: block; }
        .res-divider { height: 1px; background: rgba(255,255,255,0.2); margin: 15px 0; }
        .res-sub { display: flex; justify-content: space-between; font-size: 0.85rem; text-align: center; }

        /* Badge Rujukan */
        .badge-ref { 
            display: inline-block; background: #e3f2fd; color: #0d47a1; 
            padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; margin-bottom: 15px;
            border: 1px solid #90caf9;
        }

        /* Accordion (Edukasi Rumus) */
        .accordion { margin-top: 30px; max-width: 900px; margin-left: auto; margin-right: auto; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
        .accordion summary { padding: 15px 20px; background: #f8fbff; font-weight: bold; cursor: pointer; list-style: none; display: flex; justify-content: space-between; color: var(--primary-dark); }
        .accordion-content { padding: 25px; border-top: 1px solid #ddd; font-size: 0.9rem; color: #555; display: none; background: #fff; }
        details[open] .accordion-content { display: block; }
        
        .formula-box { background: #f9f9f9; padding: 15px; border-left: 4px solid var(--accent-gold); margin-bottom: 15px; border-radius: 4px; }
        .code-math { display:block; background:#333; color:#fff; padding:8px 12px; border-radius:4px; font-family:monospace; margin:8px 0; letter-spacing: 1px; }

        /* Gallery */
        .gallery-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 40px; }
        .gallery-img { width: 100%; height: 150px; object-fit: cover; border-radius: 6px; border: 1px solid #ddd; }

        /* Footer */
        footer { background: #111; color: #777; padding: 30px 5%; font-size: 0.85rem; text-align: center; margin-top: 60px; }

        @media (max-width: 900px) {
            .policy-grid, .infra-grid, .calc-body, .gallery-grid { grid-template-columns: 1fr; }
            .water-hero h1 { font-size: 2rem; }
            .big-number { font-size: 3.5rem; }
        }
    </style>
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="brand-wrapper">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/aqubisa-rejoso-/refs/heads/main/AqruBiSA2.png" alt="Logo AqruBiSA" style="height: 60px; width: auto; margin-bottom: 0;">
            <p style="font-size: 0.75rem; color: #555; font-weight: 600; margin-left: 2px; margin-top: -8px; line-height: 1;">Rejoso Co-Investment</p>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Beranda</a></li>
                <li><a href="biodiversity.html">Kehati</a></li>
                <li><a href="#">Water Funds</a></li>
            </ul>
        </nav>
        <a href="index.html" class="btn-header">Gabung Sekarang</a>
    </header>

    <!-- 1. HERO SECTION -->
    <section class="water-hero">
        <div class="hero-content-box">
            <h1>WATER CONSERVATION FUNDS</h1>
            <p style="font-size: 1.2rem; margin-bottom: 20px; opacity: 0.9;">Infrastruktur Sipil Teknis & Neraca Air</p>
            <p>Implementasi teknologi sipil teknis <em>(Sumur Resapan & Rorak)</em> untuk memulihkan keseimbangan neraca air di DAS Rejoso.</p>
            <br>
            <a href="index.html" class="btn-back"><i class="fas fa-arrow-left"></i> Kembali ke Dashboard</a>
        </div>
    </section>

     <!-- 2. SINERGI KEBIJAKAN -->
    <section class="policy-section">
        <div class="policy-grid">
            <div class="policy-card">
                <i class="fas fa-hand-holding-water policy-icon"></i>
                <div>
                    <h4 style="margin:0;">SDG 6: Clean Water</h4>
                    <p style="font-size:0.8rem; margin:0; color:#666;">Mendukung target global akses air bersih dan manajemen akuifer berkelanjutan.</p>
                </div>
            </div>
            <div class="policy-card">
                <i class="fas fa-layer-group policy-icon"></i>
                <div>
                    <h4 style="margin:0;">Zero Delta Q Policy</h4>
                    <p style="font-size:0.8rem; margin:0; color:#666;">Sinergi dengan Permen PUPR untuk menahan air hujan agar meresap ke tanah (Recharge).</p>
                </div>
            </div>
            <div class="policy-card">
                <i class="fas fa-bullseye policy-icon"></i>
                <div>
                    <h4 style="margin:0;">Target LFA 2031</h4>
                    <p style="font-size:0.8rem; margin:0; color:#666;">Komitmen pembangunan 300 Sumur Resapan dan 6.000 Meter Rorak.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. GLOBAL COUNTER -->
    <div class="global-counter-box">
        <h3 class="counter-label">Estimasi Total Air Diresapkan Kembali</h3>
        <div id="global-counter" class="counter-val">0</div>
        <p style="font-size: 0.9rem; margin-top: 5px;">Liter per Tahun dari seluruh infrastruktur eksisting</p>
    </div>
   
    <!-- 4. STATUS CAPAIAN (LFA) -->
    <section class="infra-section">
        <h2 class="section-title">Status Capaian Infrastruktur</h2>
        
        <div class="infra-grid">
            <!-- SUMUR RESAPAN -->
            <div class="infra-card">
                <span class="tag-infra">DEEP INJECTION</span>
                <h3 style="color:var(--water-blue);">Sumur Resapan</h3>
                <p style="font-size:0.85rem; color:#666;">Bangunan konservasi air tanah dalam untuk mengisi kembali akuifer Umbulan.</p>
                
                <!-- ANGKA BESAR -->
                <div class="big-number">70 <span style="font-size:1.2rem; font-weight:400; color:#666;">Unit</span></div>
                <small>Terbangun & Terpelihara (Eksisting 2026)</small>

                <div class="progress-container">
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; font-weight:bold; margin-bottom:5px;">
                        <span>Capaian</span>
                        <span>Target 2031: 300 Unit</span>
                    </div>
                    <div class="progress-bg"><div class="progress-fill" style="width: 23%;"></div></div>
                </div>

                <div class="spec-list">
                    <div><i class="fas fa-ruler-combined"></i> <strong>Dimensi:</strong> Standar Teknis PUPR</div>
                    <div><i class="fas fa-check-circle"></i> <strong>Verifikasi:</strong> 30 Unit terpasang Water Meter Digital.</div>
                </div>
            </div>

            <!-- RORAK -->
            <div class="infra-card">
                <span class="tag-infra" style="background:var(--success-green);">SEDIMENT TRAP</span>
                <h3 style="color:var(--success-green);">Rorak (Silt Pit)</h3>
                <p style="font-size:0.85rem; color:#666;">Jebakan air dan sedimen buntu untuk menahan laju larian air permukaan (Run-off).</p>
                
                <!-- ANGKA BESAR -->
                <div class="big-number" style="color:var(--success-green);">3.000 <span style="font-size:1.2rem; font-weight:400; color:#666;">Meter</span></div>
                <small>Terlaksana Revitalisasi & Normalisasi</small>

                <div class="progress-container">
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; font-weight:bold; margin-bottom:5px;">
                        <span>Capaian</span>
                        <span>Target 2031: 6.000 Meter</span>
                    </div>
                    <div class="progress-bg"><div class="progress-fill" style="width: 50%; background:var(--success-green);"></div></div>
                </div>

                <div class="spec-list">
                    <div><i class="fas fa-ruler-combined"></i> <strong>Dimensi LFA:</strong> 1m x 75cm x 50cm</div>
                    <div><i class="fas fa-map"></i> <strong>Standar:</strong> 100 Meter / Hektar Lahan.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. METODOLOGI VALIDASI DAMPAK -->
    <section style="background:#0b1f30; color:white; padding:50px 5%; text-align:center;">
        <h2 style="font-size:1.8rem; margin-bottom:10px;">Metodologi Validasi Dampak</h2>
        <p style="opacity:0.8; margin-bottom:40px;">Bagaimana kami menghitung volume air 1.2 Juta m³ yang terserap kembali?</p>
        
        <div style="display:flex; justify-content:center; flex-wrap:wrap; gap:50px;">
            <div style="max-width:300px;">
                <i class="fas fa-calculator" style="font-size:2.5rem; color:var(--accent-gold); margin-bottom:15px;"></i>
                <h4 style="margin-bottom:10px;">Pendekatan Rumus</h4>
                <p style="font-size:0.85rem; opacity:0.8;">Perhitungan berbasis <strong>Dimensi Bangunan x Intensitas Curah Hujan Harian</strong> di lokasi tangkapan air.</p>
            </div>
            <div style="max-width:300px;">
                <i class="fas fa-wifi" style="font-size:2.5rem; color:var(--accent-gold); margin-bottom:15px;"></i>
                <h4 style="margin-bottom:10px;">Validasi Digital</h4>
                <p style="font-size:0.85rem; opacity:0.8;">Verifikasi data real-time menggunakan <strong>Water Meter</strong> yang terpasang pada sampel unit sumur resapan.</p>
            </div>
            <div style="max-width:300px;">
                <i class="fas fa-check-double" style="font-size:2.5rem; color:var(--accent-gold); margin-bottom:15px;"></i>
                <h4 style="margin-bottom:10px;">Verifikasi Pihak Ketiga</h4>
                <p style="font-size:0.85rem; opacity:0.8;">Audit berkala oleh tim ahli hidrologi untuk memastikan fungsi resapan berjalan optimal.</p>
            </div>
        </div>
    </section>

    <!-- 6. KALKULATOR POTENSI SERAPAN (TAB MODE) -->
    <section class="calc-section">
        <div style="text-align:center; margin-bottom:30px;">
            <h2 style="color:var(--primary-dark); font-size:2rem; margin-bottom:5px;">Kalkulator Potensi Serapan</h2>
            <p style="color:#666;">Pilih dasar metode perhitungan yang ingin digunakan.</p>
        </div>

        <div class="calc-wrapper">
            <!-- TABS -->
            <div class="calc-tabs">
                <div class="calc-tab active" onclick="switchTab('satuan', this)">
                    <i class="fas fa-cube"></i> Metode Volumetrik (Dimensi Fisik)
                </div>
                <div class="calc-tab" onclick="switchTab('program', this)">
                    <i class="fas fa-globe-asia"></i> Metode Standar SNI (Hidrologi)
                </div>
            </div>

            <!-- TAB 1: METODE VOLUMETRIK (SATUAN) -->
            <div id="mode-satuan" class="calc-body">
                <div>
                    <h4 style="color:var(--water-blue); margin-bottom:15px;"><i class="far fa-edit"></i> Input Data Dimensi Unit</h4>
                    
                    <span class="badge-ref">Dasar Hitungan: Kapasitas Tampung Volume</span>

                    <label class="form-label">Jenis Infrastruktur</label>
                    <select id="infraType" class="form-control" onchange="toggleDimensi()">
                        <option value="rorak">Rorak (Jebakan Air)</option>
                        <option value="sumur">Sumur Resapan</option>
                    </select>

                    <div class="form-row" id="dimensi-rorak">
                        <div style="flex:1;">
                            <label class="form-label">Panjang (m)</label>
                            <input type="number" id="p_rorak" value="2" class="form-control">
                        </div>
                        <div style="flex:1;">
                            <label class="form-label">Lebar (cm)</label>
                            <input type="number" id="l_rorak" value="70" class="form-control">
                        </div>
                        <div style="flex:1;">
                            <label class="form-label">Dalam (cm)</label>
                            <input type="number" id="d_rorak" value="70" class="form-control">
                        </div>
                    </div>

                    <div id="dimensi-sumur" style="display:none;">
                        <div class="form-row">
                            <div style="flex:1;">
                                <label class="form-label">Diameter (cm)</label>
                                <input type="number" id="d_sumur" value="80" class="form-control">
                            </div>
                            <div style="flex:1;">
                                <label class="form-label">Dalam (m)</label>
                                <input type="number" id="h_sumur" value="1.5" class="form-control">
                            </div>
                        </div>
                        <label class="form-label">Tipe Dinding</label>
                        <select id="wall_sumur" class="form-control">
                            <option value="porous">Berpori / Celah Bata (Resapan Tinggi)</option>
                            <option value="solid">Beton Kedap (Resapan Dasar)</option>
                        </select>
                    </div>

                    <label class="form-label">Kondisi Tanah (Lokasi)</label>
                    <select id="soilType" class="form-control">
                        <option value="sedang">Hulu/Tengah (Gembur/Latosol) - Std Rejoso</option>
                        <option value="lambat">Hilir (Lempung/Liat) - Lambat Meresap</option>
                        <option value="cepat">Pasir/Berbatu - Cepat Meresap</option>
                    </select>

                    <label class="form-label">Jumlah Unit</label>
                    <input type="number" id="qty_satuan" value="1" class="form-control">

                    <button class="btn-calc" onclick="hitungSatuan()">Hitung Potensi Serapan &rarr;</button>
                </div>

                <div class="result-panel">
                    <span class="res-title">Potensi Serapan per Tahun</span>
                    <div id="res-val-satuan" class="res-number">58.800</div>
                    <span class="res-unit">Liter Air</span>
                    
                    <div class="res-divider"></div>
                    
                    <div class="res-sub">
                        <div>
                            <strong id="res-m3-satuan" style="font-size:1.2rem;">58,8</strong><br>
                            Meter Kubik (m³)
                        </div>
                        <div>
                            <strong id="res-org-satuan" style="font-size:1.2rem;">3</strong><br>
                            Setara Kebutuhan Orang/Thn
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 2: METODE SNI/PU (KAWASAN) -->
            <div id="mode-program" class="calc-body" style="display:none;">
                <div>
                    <h4 style="color:var(--water-blue); margin-bottom:15px;"><i class="fas fa-layer-group"></i> Input Data Hidrologi Kawasan</h4>
                    
                    <span class="badge-ref">Dasar Hitungan: SNI 03-2453-2002</span>

                    <label class="form-label">Luas Lahan Program (Hektar)</label>
                    <input type="number" id="luas_lahan" value="1" class="form-control">

                    <label class="form-label">Kondisi Tutupan Lahan Saat Ini</label>
                    <select id="tutupan_lahan" class="form-control">
                        <option value="0.3">Hutan / Agroforest Rapat (Koef C: 0.3)</option>
                        <option value="0.5">Kebun Campuran / Semak (Koef C: 0.5)</option>
                        <option value="0.7">Tegalan Terbuka / Ladang (Koef C: 0.7)</option>
                        <option value="0.9">Pemukiman / Atap (Koef C: 0.9)</option>
                    </select>

                    <label class="form-label">Rencana Infrastruktur</label>
                    <div class="form-row">
                        <div style="flex:2;">
                            <select id="tipe_infra_prog" class="form-control">
                                <option value="rorak">Rorak (Panjang 2m)</option>
                                <option value="sumur">Sumur (Dia 80cm)</option>
                            </select>
                        </div>
                        <div style="flex:1;">
                            <input type="number" id="target_per_ha" value="100" class="form-control" placeholder="Jml/Ha">
                        </div>
                    </div>
                    <small style="color:#888; font-size:0.7rem;">*Masukkan target jumlah unit per Hektar.</small>

                    <button class="btn-calc" onclick="hitungProgram()">Analisa Dampak Program &rarr;</button>
                </div>

                <div class="result-panel" style="background:#2c3e50;">
                    <span class="res-title">Estimasi Total Serapan Kawasan</span>
                    <div id="res-vol-prog" class="res-number" style="color:#20c997;">0</div>
                    <span class="res-unit">Liter / Tahun</span>
                    
                    <div class="res-divider"></div>
                    
                    <div class="res-sub">
                        <div>
                            <strong id="res-m3-prog" style="font-size:1.2rem;">0</strong><br>
                            Volume (m³/Tahun)
                        </div>
                        <div>
                            <strong id="res-persen-prog" style="font-size:1.2rem;">0%</strong><br>
                            Efektivitas Menangani Run-off
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- INFO BOX -->
            <div class="info-box">
                <strong><i class="fas fa-info-circle"></i> Transparansi Metode:</strong><br>
                Kalkulator ini menyediakan dua pendekatan. Gunakan <strong>Metode Volumetrik</strong> untuk menghitung kapasitas per-lubang, atau <strong>Metode SNI/Hidrologi</strong> untuk analisis kebutuhan kawasan berdasarkan limpasan air hujan (Run-off).
            </div>

        </div>

        <!-- ACCORDION EDUKASI (RUMUS TRANSPARAN) -->
        <details class="accordion">
            <summary>
                <span><i class="fas fa-book-open" style="margin-right:10px; color:var(--water-blue);"></i> Pelajari Dasar Perhitungan & Rumus</span>
                <i class="fas fa-chevron-down"></i>
            </summary>
            <div class="accordion-content">
                <p style="margin-bottom: 20px;">Platform AqruBiSA menggunakan landasan ilmiah untuk setiap angka yang ditampilkan:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <!-- RUMUS SATUAN -->
                    <div class="formula-box">
                        <strong style="color:var(--primary-dark);">1. Metode Volumetrik (Cek Fisik)</strong>
                        <p style="font-size:0.85rem; margin-top:5px;">Digunakan untuk menghitung kapasitas tampung fisik. Dasar perhitungannya adalah volume geometris dikalikan frekuensi hujan tahunan di Rejoso.</p>
                        <code class="code-math">V_total = (P x L x D) x Hari_Hujan x K_tanah</code>
                        <ul style="font-size:0.8rem; padding-left:15px; margin-top:5px;">
                            <li><strong>P, L, D:</strong> Dimensi infrastruktur (Panjang, Lebar, Dalam)</li>
                            <li><strong>Hari_Hujan:</strong> Asumsi 120 Hari/Tahun (Data Iklim Rejoso)</li>
                            <li><strong>K_tanah:</strong> Koefisien serapan tanah (Latosol=1.0)</li>
                        </ul>
                    </div>

                    <!-- RUMUS KAWASAN -->
                    <div class="formula-box">
                        <strong style="color:var(--primary-dark);">2. Metode SNI 03-2453-2002 (Kawasan)</strong>
                        <p style="font-size:0.85rem; margin-top:5px;">Digunakan untuk perencanaan kawasan (Program). Mengacu pada Metode Rasional untuk menghitung debit limpasan (Run-off) yang harus ditangani.</p>
                        <code class="code-math">Q_limpasan = C x I x A</code>
                        <ul style="font-size:0.8rem; padding-left:15px; margin-top:5px;">
                            <li><strong>C (Koefisien Aliran):</strong> Berdasarkan jenis tutupan lahan (Misal: Hutan=0.3, Tegal=0.7)</li>
                            <li><strong>I (Intensitas):</strong> Curah hujan rata-rata tahunan Rejoso (~2000mm)</li>
                            <li><strong>A (Area):</strong> Luas lahan dalam Hektar</li>
                        </ul>
                    </div>
                </div>
            </div>
        </details>

    </section>

    <!-- GALERI -->
    <section class="infra-section">
        <h2 style="text-align:center; margin-bottom:20px; color:var(--primary-dark);">Dokumentasi Infrastruktur Terbangun</h2>
        <p style="text-align:center; color:#666; margin-bottom:30px;">Bukti fisik implementasi program di lapangan.</p>
        <div class="gallery-grid">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/aqubisa-rejoso-/refs/heads/main/sumur%20resapan%201.jpg" class="gallery-img" alt="Sumur Resapan 1">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/aqubisa-rejoso-/refs/heads/main/Pembangunan%20Rorak.jpg" class="gallery-img" alt="Pembangunan Rorak">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/aqubisa-rejoso-/refs/heads/main/Water%20Meter.jpg" class="gallery-img" alt="Water Meter">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/aqubisa-rejoso-/refs/heads/main/Lokasi%20Tangkapan%20Air.jpg" class="gallery-img" alt="Lokasi Tangkapan Air">
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2026-2031 Rejoso Co-Investment Initiative. All Rights Reserved.</p>
    </footer>

    <!-- JAVASCRIPT -->
    <script>
        // 1. GLOBAL ANIMATION
        window.addEventListener('load', () => {
            const counterElement = document.getElementById('global-counter');
            animateValue(counterElement, 0, 118000000, 2000);
            hitungSatuan(); // Hitung default saat load
        });

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('id-ID');
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // 2. TAB SWITCHER
        function switchTab(mode, element) {
            document.querySelectorAll('.calc-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            if (mode === 'satuan') {
                document.getElementById('mode-satuan').style.display = 'grid';
                document.getElementById('mode-program').style.display = 'none';
                hitungSatuan();
            } else {
                document.getElementById('mode-satuan').style.display = 'none';
                document.getElementById('mode-program').style.display = 'grid';
                hitungProgram();
            }
        }

        // 3. TOGGLE DIMENSI
        function toggleDimensi() {
            const type = document.getElementById('infraType').value;
            if (type === 'rorak') {
                document.getElementById('dimensi-rorak').style.display = 'flex';
                document.getElementById('dimensi-sumur').style.display = 'none';
            } else {
                document.getElementById('dimensi-rorak').style.display = 'none';
                document.getElementById('dimensi-sumur').style.display = 'block';
            }
        }

        // 4. LOGIKA HITUNGAN SATUAN (VOLUMETRIK)
        function hitungSatuan() {
            const type = document.getElementById('infraType').value;
            const qty = parseFloat(document.getElementById('qty_satuan').value) || 0;
            const hariHujan = 120;
            
            // Faktor Tanah
            const soil = document.getElementById('soilType').value;
            let kFactor = 1.0; 
            if (soil === 'lambat') kFactor = 0.5;
            if (soil === 'cepat') kFactor = 1.5;

            let volPerUnit = 0;

            if (type === 'rorak') {
                const p = parseFloat(document.getElementById('p_rorak').value) || 0;
                const l = parseFloat(document.getElementById('l_rorak').value) / 100 || 0;
                const d = parseFloat(document.getElementById('d_rorak').value) / 100 || 0;
                volPerUnit = p * l * d * 1000;
            } else {
                const dia = parseFloat(document.getElementById('d_sumur').value) / 100 || 0;
                const depth = parseFloat(document.getElementById('h_sumur').value) || 0;
                const r = dia / 2;
                let volM3 = Math.PI * (r * r) * depth;
                if (document.getElementById('wall_sumur').value === 'porous') volM3 *= 1.5;
                volPerUnit = volM3 * 1000;
            }

            const totalLiter = volPerUnit * hariHujan * qty * kFactor;
            
            document.getElementById('res-val-satuan').innerText = Math.round(totalLiter).toLocaleString('id-ID');
            document.getElementById('res-m3-satuan').innerText = (totalLiter / 1000).toLocaleString('id-ID', {maximumFractionDigits: 1});
            document.getElementById('res-org-satuan').innerText = Math.round(totalLiter / 21900).toLocaleString('id-ID');
        }

        // 5. LOGIKA HITUNGAN PROGRAM (METODE RASIONAL PU)
        function hitungProgram() {
            const luasHa = parseFloat(document.getElementById('luas_lahan').value) || 0;
            const koefC = parseFloat(document.getElementById('tutupan_lahan').value);
            const curahHujanTahunan = 2000; // mm

            // A. Supply (Runoff Total)
            const luasM2 = luasHa * 10000;
            const hujanM = curahHujanTahunan / 1000;
            const totalRunoff = luasM2 * hujanM * koefC; // m3

            // B. Demand (Kapasitas Infra)
            const targetPerHa = parseFloat(document.getElementById('target_per_ha').value) || 0;
            const totalUnit = targetPerHa * luasHa;
            const hariHujan = 120;
            const tipe = document.getElementById('tipe_infra_prog').value;

            let volPerUnitM3 = 0;
            if (tipe === 'rorak') {
                volPerUnitM3 = 2 * 0.4 * 0.4; // Asumsi standar 2m x 40cm x 40cm
            } else {
                volPerUnitM3 = 3.14 * 0.4 * 0.4 * 1.5; // Asumsi standar sumur
            }

            const totalCapacityM3 = volPerUnitM3 * totalUnit * hariHujan;
            
            // Konversi ke Liter untuk Tampilan Utama
            const totalCapacityLiter = totalCapacityM3 * 1000;

            // C. Efektivitas
            let efektivitas = 0;
            if (totalRunoff > 0) efektivitas = (totalCapacityM3 / totalRunoff) * 100;
            if (efektivitas > 100) efektivitas = 100;

            // RENDER OUTPUT PROGRAM
            document.getElementById('res-vol-prog').innerText = Math.round(totalCapacityLiter).toLocaleString('id-ID'); // Liter (Besar)
            document.getElementById('res-m3-prog').innerText = Math.round(totalCapacityM3).toLocaleString('id-ID'); // M3 (Kecil)
            document.getElementById('res-persen-prog').innerText = Math.round(efektivitas) + "%"; // Persen (Kecil)
        }
    </script>
</body>
</html>
